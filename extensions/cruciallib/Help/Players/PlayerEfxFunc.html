<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta http-equiv="Content-Style-Type" content="text/css">
<title></title>
<meta name="Generator" content="Cocoa HTML Writer">
<meta name="CocoaVersion" content="824.42">
<style type="text/css">
p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 18.0px Helvetica}
p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; min-height: 12.0px}
p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco}
p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #a71e12}
p.p7 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #326f17}
p.p8 {margin: 0.0px 0.0px 0.0px 0.0px; font: 9.0px Monaco; color: #0019b7}
span.s1 {color: #0019b7}
span.s2 {color: #326f17}
span.s3 {color: #000000}
span.Apple-tab-span {white-space:pre}
</style>
</head>
<body>
<p class="p1"><b>PlayerEfxFunc</b></p>
<p class="p2"><br></p>
<p class="p3"><b>a Player and an effect</b></p>
<p class="p2"><br></p>
<p class="p3"><b><span class="Apple-tab-span">	</span>PlayerEfxFunc(player,aHasPatchIns,inputIndex)</b></p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>player</b> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>- any player</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>aHasPatchIns</b> <span class="Apple-tab-span">	</span>- subclass of HasPatchIns, most commonly Patch</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><b>inputIndex</b> <span class="Apple-tab-span">	</span>- which PatchIn to plug the player into.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>its easiest to write effect Patches with an 'audio' input</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>in the first slot, and the Patch can be saved with a PlayerInputProxy</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>as the input.</p>
<p class="p3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>this is a deepIndex, a depth first traversal going down any subpatches.</p>
<p class="p2"><br></p>
<p class="p4"><br></p>
<p class="p5">(</p>
<p class="p5"><span class="s1">Instr</span>([<span class="s2">\metal</span>,<span class="s2">\cowboy</span>],{ <span class="s1">arg</span> trig,decay=0.04,noise=0.03,freqScale=1.0,timeScale=1.0;</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> z;</p>
<p class="p6"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>// cowboy horse</p>
<p class="p5"><span class="Apple-tab-span">	</span>z = <span class="Apple-tab-span">	</span>[ `(#[ [ 1529.7, 1483.76, 1535.99, 1484.43, 1505.93, 1489.52, 1520.41,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>1488.2, 1485.2, 1484.89, 1531.32, 1523.36, 1499.86, 1515.78 ],<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span><span class="s1">nil</span>, [ 0.113974, 0.0999759, 0.240025, 0.0511734, 0.22413, 0.0680363,</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> </span>0.228308, 0.0525205, 0.0169197, 0.131742,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span>0.18775, 0.0991267, 0.119733, 0.0575907 ] ]),<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span>`(#[ [ 1530.7, 1498.63, 1501.59, 1526.8, 1513.55, 1502.9, 1524.68,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>1515.48, 1523.02, 1513.11, 1484.01, 1535.29, 1496.4, 1513.86 ],<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span><span class="s1">nil</span>,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span>[ 0.212696, 0.0171297, 0.0768345, 0.0789025, 0.323539, 0.0921697,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>0.0149089, 0.102342, 0.117676, 0.058209,<span class="Apple-converted-space">  </span>0.0735961, 0.0207109, 0.385993, 0.04467 ]<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space">  </span>]) ];</p>
<p class="p4"><br></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Klank</span>.ar(z,<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">Decay</span>.ar(<span class="s1">Impulsar</span>.ar(trig), decay, <span class="s1">WhiteNoise</span>.ar(noise)),</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>freqScale,</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>0.0,</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>timeScale);</p>
<p class="p5">});</p>
<p class="p4"><br></p>
<p class="p7"><span class="s3">p = <span class="Apple-tab-span">	</span></span><span class="s1">Patch</span><span class="s3">([</span>\metal<span class="s3">,</span>\cowboy<span class="s3">],[</span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="s1">Stream2Trig</span>(<span class="s1">Pseq</span>(#[ 0, 0, 0, 0.305556, 0, 0, 0, 0, 0, 0,<span class="Apple-converted-space">  </span>0, 0.1, 0, 0, 0, 0 ],<span class="s1">inf</span>))</p>
<p class="p5"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span>]);</p>
<p class="p4"><br></p>
<p class="p5">e =<span class="Apple-converted-space">  </span><span class="s1">Patch</span>({<span class="Apple-tab-span">	</span><span class="s1">arg</span> audio,decay=1,maxDelay=0.3,qnty=4,chanDiff=0.1;</p>
<p class="p4"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>(qnty.asInteger).do({</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">var</span> x;<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>audio =<span class="Apple-converted-space"> </span></p>
<p class="p5"><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="s1">AllpassL</span>.ar(audio, maxDelay,<span class="Apple-converted-space"> <span class="Apple-tab-span">	</span></span></p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>[rrand(0.01,maxDelay),rrand(0.01,maxDelay)],</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>decay)</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-converted-space"> <span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span> </span>});</p>
<p class="p5"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span>audio</p>
<p class="p5"><span class="Apple-tab-span">	</span>},[</p>
<p class="p8"><span class="s3"><span class="Apple-tab-span">	</span><span class="Apple-tab-span">	</span></span>PlayerInputProxy<span class="s3">.new</span></p>
<p class="p5"><span class="Apple-tab-span">	</span>]);</p>
<p class="p4"><br></p>
<p class="p5"><span class="s1">PlayerEfxFunc</span>( p, e ).gui<span class="Apple-converted-space"> </span></p>
<p class="p4"><br></p>
<p class="p3">)</p>
<p class="p2"><br></p>
<p class="p5">e.patchIns.insp</p>
<p class="p2"><br></p>
<p class="p3">p.bus.insp</p>
<p class="p3">e.bus.insp</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">look for first patchIn of same rate</p>
<p class="p2"><br></p>
<p class="p3">p.synth.insp</p>
<p class="p3">e.synth.insp</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">player input proxy</p>
<p class="p3"><span class="Apple-tab-span">	</span>in bus 6 2</p>
<p class="p3"><span class="Apple-tab-span">	</span>out bus 5 1</p>
<p class="p2"><span class="Apple-tab-span">	</span></p>
<p class="p3"><span class="Apple-tab-span">	</span>spec and<span class="Apple-converted-space">  </span>channels right</p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p2"><br></p>
<p class="p3">p.rate</p>
<p class="p2"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span></p>
<p class="p2"><span class="Apple-converted-space">  <span class="Apple-tab-span">	</span></span></p>
<p class="p2"><span class="Apple-converted-space">  </span></p>
</body>
</html>
